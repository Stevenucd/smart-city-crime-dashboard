  #root {
    @apply max-w-screen-xl mx-auto;
  }

  .page {
    @apply min-h-screen flex flex-col gap-5 px-6 pt-8 pb-20;
  }

  .card {
    @apply relative overflow-hidden rounded-3xl border p-6;
    background: var(--card);
    border-color: var(--border);
    box-shadow: var(--shadow);
  }

  .card::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: 24px;
    background: linear-gradient(135deg, rgba(13, 115, 255, 0.06), rgba(13, 201, 255, 0.05));
    opacity: 0.45;
  }

  .card > * {
    @apply relative;
    z-index: 1;
  }

  .topbar {
    @apply flex items-center justify-between;
  }

  .topbar h1 {
    @apply my-1;
  }

  .tabs {
    @apply inline-flex items-center gap-2 rounded-xl border px-2 py-1;
    background: #f4f6fb;
    border-color: var(--border);
  }

  .tab {
    @apply border border-transparent rounded-xl px-3 py-2 font-semibold cursor-pointer bg-transparent;
    color: var(--muted);
  }

  .tab--active {
    @apply bg-white border shadow-lg;
    color: var(--ink);
    border-color: var(--border);
    box-shadow: 0 8px 20px rgba(12, 44, 82, 0.08);
  }

  .alert {
    @apply mb-2 rounded-xl border px-4 py-3 font-semibold;
    border-color: var(--border);
  }

  .alert--warn {
    background: #fff6ec;
    color: #b34c00;
    border-color: #f3d4b8;
  }

  .alert--error {
    background: #ffecec;
    color: #b00020;
    border-color: #f5b5b5;
  }

  .chip-row {
    @apply mb-3 flex flex-wrap gap-2.5;
  }

  .chip {
    @apply inline-flex items-center gap-1.5 rounded-full border px-3 py-2 text-sm;
    background: #f4f6fb;
    color: var(--ink);
    border-color: var(--border);
  }

  .chip--soft {
    background: #ecf5ff;
    border-color: #d8e7ff;
  }

  .chip--clickable {
    @apply cursor-pointer transition;
  }

  .chip--clickable:hover {
    border-color: #c5d9ff;
    background: #f4f8ff;
  }

  .chip--active {
    background: #0d73ff;
    color: #fff;
    border-color: #0d73ff;
  }

  .btn {
    @apply inline-flex items-center justify-center rounded-xl border px-4 py-3 text-sm font-semibold cursor-pointer transition;
    border-color: transparent;
    background: transparent;
  }

  .btn--primary {
    background: linear-gradient(120deg, #0d73ff, #0dc9ff);
    color: #fff;
    box-shadow: 0 12px 30px rgba(13, 115, 255, 0.25);
  }

  .btn--ghost {
    @apply border;
    color: var(--ink);
    border-color: var(--border);
    background: #f9fbff;
  }

  .btn:hover {
    @apply -translate-y-0.5;
  }

  .meta-row {
    @apply mt-1 flex flex-wrap gap-3 text-sm;
    color: var(--muted);
  }

  .eyebrow {
    @apply uppercase text-xs;
    letter-spacing: 0.08em;
    color: var(--muted);
    margin: 0;
  }

  .hero__side {
    background: rgba(255, 255, 255, 0.82);
    backdrop-filter: blur(16px);
    border: 1px solid #e8eef8;
  }

  .card--frosted::after {
    opacity: 0;
  }

  .side__header {
    @apply flex items-center justify-between;
  }

  .pill {
    @apply inline-flex items-center rounded-full border px-2.5 py-1.5 text-xs;
    background: #eef3fb;
    color: #0d73ff;
    border-color: #dde5f4;
  }

  .pill--warn {
    background: #fff1e6;
    color: #ca5300;
    border-color: #f3d4b8;
  }

  .pill--ok {
    background: #e9f7f1;
    color: #1f7a4c;
    border-color: #c5e7d7;
  }

  .side__stats {
    @apply grid gap-3 my-3;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }

  .stat__label {
    @apply m-0 text-sm;
    color: var(--muted);
  }

  .stat__value {
    @apply my-1 text-2xl font-bold;
  }

  .stat__delta {
    @apply m-0 text-sm;
    color: #1f7a4c;
  }

  .side__footer {
    @apply flex items-end justify-between gap-3;
  }

  .sparkline {
    @apply flex items-end gap-1 h-14;
  }

  .sparkline span {
    @apply flex-1 rounded-t;
    min-width: 4px;
    background: linear-gradient(180deg, #0d73ff, #0dc9ff);
  }

  .note {
    @apply my-1;
    color: var(--muted);
  }

  .grid {
    display: grid;
    gap: 20px;
    align-items: start;
    grid-template-columns: 2fr 1fr;
  }

  .grid--two {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .grid--thirds {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .panel__header {
    @apply flex items-start justify-between gap-4;
  }

  .muted {
    color: var(--muted);
  }

  .controls {
    @apply flex gap-2.5;
  }

  .control {
    @apply flex flex-col gap-1.5 text-sm;
    color: var(--muted);
  }

  .control select,
  .control input {
    @apply rounded-xl border px-3 py-2.5;
    background: #fff;
    color: var(--ink);
    border-color: var(--border);
  }

  .chip-row--wrap {
    @apply flex flex-wrap gap-2.5 my-3;
  }

  .map-card {
    @apply pb-4;
  }

  .map {
    @apply relative overflow-hidden rounded-2xl mt-3 border;
    height: 340px;
    border-color: #0d214b;
    background: radial-gradient(circle at 25% 20%, rgba(13, 201, 255, 0.32), transparent 38%),
      radial-gradient(circle at 82% 68%, rgba(13, 115, 255, 0.28), transparent 42%),
      #0a132b;
  }

  .map::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(rgba(255, 255, 255, 0.07) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.07) 1px, transparent 1px);
    background-size: 34px 34px;
    opacity: 0.45;
    pointer-events: none;
  }

  .map__leaflet,
  .map .leaflet-container {
    @apply absolute inset-0 w-full h-full;
  }

  .detail-panel {
    @apply absolute top-4 right-4 w-80 rounded-2xl border p-4 bg-white shadow-2xl;
    max-width: 42vw;
    border-color: var(--border);
    box-shadow: 0 16px 36px rgba(12, 44, 82, 0.2);
  }

  .detail-panel__header {
    @apply flex items-center justify-between gap-2;
  }

  .map-shell--full {
    @apply fixed inset-3 m-0 rounded-2xl;
    z-index: 1200;
    width: calc(100vw - 24px);
    height: calc(100vh - 24px);
    box-shadow: 0 30px 80px rgba(12, 44, 82, 0.22);
  }

  .map-shell--full .map {
    height: calc(100vh - 200px);
  }

  .map-shell--full .controls {
    @apply items-center;
  }

  .legend {
    @apply grid gap-3 mt-3;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }

  .insights-card .list {
    list-style: none;
    padding: 0;
    margin: 12px 0;
  }

  .list li {
    @apply flex items-center justify-between py-2.5 border-b;
    border-color: var(--border);
  }

  .list__title {
    @apply m-0 font-bold;
  }

  .divider {
    @apply h-px my-3;
    background: var(--border);
  }

  .insight-cards {
    @apply grid gap-3;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }

  .mini-card {
    @apply rounded-xl border p-3;
    background: #f9fbff;
    border-color: var(--border);
  }

  .mini-card__value {
    @apply my-1 font-bold;
  }

  .mini-card__note {
    @apply m-0 text-sm;
    color: var(--muted);
  }

  .bars {
    @apply mt-2.5 flex flex-col gap-3;
  }

  .bar__label {
    @apply flex items-center justify-between;
  }

  .bar__track {
    @apply h-2.5 overflow-hidden rounded-xl;
    background: #eef2f7;
  }

  .bar__fill {
    @apply block h-full rounded-xl;
    background: linear-gradient(90deg, #0d73ff, #0dc9ff);
  }

  .trend-card {
    @apply overflow-hidden;
  }

  .trend {
    @apply rounded-xl border p-2.5 mb-2;
    background: #f6f9ff;
    border-color: #e0e8f7;
  }

  .trend svg {
    @apply w-full h-36;
  }

  .trend__labels {
    @apply flex justify-between text-xs;
    color: var(--muted);
    margin-top: -6px;
  }

  .prediction-list {
    @apply flex flex-col gap-2.5;
  }

  .prediction-list--grid {
    @apply grid gap-3;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .prediction {
    @apply flex items-center justify-between gap-2.5 rounded-xl border p-3;
    background: #f7f9fc;
    border-color: var(--border);
  }

  .prediction--block {
    @apply flex-col items-start;
  }

  .prediction__stats {
    @apply flex items-center gap-3;
  }

  .prediction__value {
    @apply m-0 text-lg font-bold;
  }

  .mini-trend {
    @apply mt-4;
  }

@media (max-width: 1000px) {
  .hero {
    grid-template-columns: 1fr;
  }

  .grid {
    grid-template-columns: 1fr;
  }

  .meta-row {
    gap: 8px;
  }
}

@media (max-width: 720px) {
  .page {
    padding: 20px 16px 48px;
  }

  .controls {
    flex-direction: column;
  }

  .marker {
    min-width: 110px;
  }

  .user-card {
    grid-template-columns: 1fr;
  }
}
